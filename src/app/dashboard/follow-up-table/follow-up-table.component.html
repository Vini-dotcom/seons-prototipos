<div class="table-wrapper">
  <table mat-table [dataSource]="data" class="mat-elevation-z1">
    <ng-container matColumnDef="processo">
      <th mat-header-cell *matHeaderCellDef> Processo </th>
      <td mat-cell *matCellDef="let element"> {{element.id}} </td>
    </ng-container>

    <ng-container matColumnDef="status">
      <th mat-header-cell *matHeaderCellDef> Status </th>
      <td mat-cell *matCellDef="let element">
        <span class="status" [ngClass]="element.status">
          <mat-icon *ngIf="element.status==='ok'">check_circle</mat-icon>
          <mat-icon *ngIf="element.status==='atencao'">priority_high</mat-icon>
          <mat-icon *ngIf="element.status==='atrasado'">error</mat-icon>
          {{ element.status }}
        </span>
      </td>
    </ng-container>

    <ng-container matColumnDef="embarque">
      <th mat-header-cell *matHeaderCellDef> Data Embarque </th>
      <td mat-cell *matCellDef="let element"> {{element.dataEmbarque}} </td>
    </ng-container>

    <ng-container matColumnDef="chegada">
      <th mat-header-cell *matHeaderCellDef> Data Chegada </th>
      <td mat-cell *matCellDef="let element"> {{element.dataChegada}} </td>
    </ng-container>

    <ng-container matColumnDef="prevista">
      <th mat-header-cell *matHeaderCellDef> Prevista Entrega </th>
      <td mat-cell *matCellDef="let element"> {{element.dataPrevistaEntrega}} </td>
    </ng-container>

    <ng-container matColumnDef="pendencias">
      <th mat-header-cell *matHeaderCellDef> Pendências </th>
      <td mat-cell *matCellDef="let element">
        <span matBadge="{{element.pendencias}}" matBadgeColor="warn" matBadgeOverlap="false"></span>
      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns;" class="row"></tr>
  </table>

  <mat-accordion multi>
    <mat-expansion-panel *ngFor="let p of data">
      <mat-expansion-panel-header>
        <mat-panel-title>
          Detalhes — {{ p.id }}
        </mat-panel-title>
      </mat-expansion-panel-header>

      <div class="details">
        <div><strong>Responsável:</strong> {{ p.responsavel }}</div>
        <div><strong>Histórico:</strong>
          <ul>
            <li *ngFor="let h of p.historico">{{ h }}</li>
          </ul>
        </div>
        <div class="actions">
          <button mat-raised-button color="primary">Abrir processo</button>
          <button mat-stroked-button color="accent">Contatar responsável</button>
        </div>
      </div>
    </mat-expansion-panel>
  </mat-accordion>
</div>



